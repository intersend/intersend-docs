<!doctype html>
<html lang="en" data-vocs>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/initializeTheme.iife.js"></script><link rel="preload" as="image" href="/images/Logo_black_version.svg"/><link rel="preload" as="image" href="/images/Logo_white_version.svg"/><title>Privy Integration – Intersend</title><meta name="description" content="Add your Privy-powered app to Intersend."/><meta property="og:type" content="website"/><meta property="og:title" content="Privy Integration"/><meta property="og:description" content="Add your Privy-powered app to Intersend."/><meta name="twitter:card" content="summary_large_image"/>
    <script type="module" crossorigin src="/assets/index-BPPGhjdf.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/style-_MuVjs94.css">
  </head>
  <body>
    <div id="app"><div class="vocs_DocsLayout" data-layout="docs"><a class="vocs_SkipLink vocs_utils_visuallyHidden" href="/apps/privy#vocs-content">Skip to content</a><div class="vocs_DocsLayout_gutterLeft"><aside class="vocs_Sidebar vocs_DocsLayout_sidebar"><div><div class="vocs_Sidebar_logoWrapper"><div class="vocs_Sidebar_logo"><a style="align-items:center;display:flex;height:100%" href="/" data-discover="true"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/images/Logo_black_version.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/images/Logo_white_version.svg"/></a></div><div class="vocs_Sidebar_divider"></div></div><nav class="vocs_Sidebar_navigation"><div class="vocs_Sidebar_group"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/" variant="styleless" data-discover="true">Introduction</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/overview" variant="styleless" data-discover="true">Overview</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_sectionTitle">Apps - Get Listed</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/apps/overview" variant="styleless" data-discover="true">Overview</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/apps/safe" variant="styleless" data-discover="true">Safe Integration</a><a data-active="true" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/apps/privy" variant="styleless" data-discover="true">Privy Integration</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/apps/dynamic" variant="styleless" data-discover="true">Dynamic Integration</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_sectionTitle">Wallets - Add Apps</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/waas/overview-waas" variant="styleless" data-discover="true">Overview</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/waas/quickstart-waas" variant="styleless" data-discover="true">Quickstart</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_sectionTitle">Auth - Make Apps Portable</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/auth-providers/overview-auth" variant="styleless" data-discover="true">Overview</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/auth-providers/integration-auth" variant="styleless" data-discover="true">Integration</a></div></section></div></nav></div><div class="vocs_Sidebar_footer"><div class="vocs_Sidebar_footerCurtain"></div><div class="vocs_Sidebar_footerContent"></div></div></aside></div><div class="vocs_DocsLayout_gutterTop vocs_DocsLayout_gutterTop_offsetLeftGutter"><div class="vocs_DesktopTopNav"><button class="vocs_DesktopSearch_search" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rlj:" data-state="closed"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-top:2px"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>Search...<div class="vocs_DesktopSearch_searchCommand"><div style="background:currentColor;transform:rotate(45deg);width:1.5px;border-radius:2px;height:100%"></div></div></button><div class="vocs_DesktopTopNav_logoWrapper"><div class="vocs_DesktopTopNav_logo"><a style="align-items:center;display:flex;height:56px;margin-top:4px" href="/" data-discover="true"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/images/Logo_black_version.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/images/Logo_white_version.svg"/></a></div></div><div class="vocs_DesktopTopNav_section"></div><div class="vocs_DesktopTopNav_section"><div class="vocs_DesktopTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><a data-active="false" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="mailto:hello@intersend.io" variant="styleless" data-radix-collection-item="">Support</a><a class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless vocs_ExternalLink" href="https://app.intersend.io" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)" data-active="false" variant="styleless" data-radix-collection-item="">Dashboard →</a></ul></div></nav></div></div></div><div class="vocs_MobileTopNav"><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group"><div class="vocs_MobileTopNav_logo"><a style="align-items:center;display:flex;height:100%" href="/" data-discover="true"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/images/Logo_black_version.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/images/Logo_white_version.svg"/></a></div></div><div class="vocs_MobileTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_MobileTopNav_navigation vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><a data-active="false" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="mailto:hello@intersend.io" variant="styleless" data-radix-collection-item="">Support</a><a class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless vocs_ExternalLink" href="https://app.intersend.io" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)" data-active="false" variant="styleless" data-radix-collection-item="">Dashboard →</a></ul></div></nav><div class="vocs_MobileTopNav_navigation vocs_MobileTopNav_navigation_compact"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rkpj:" data-state="closed" class="vocs_MobileTopNav_menuTrigger vocs_MobileTopNav_navigationItem">Menu<div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Down</title><path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button></div></div></div><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group" style="margin-right:-8px"><button class="vocs_MobileSearch_searchButton" type="button" aria-label="Search" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R19j:" data-state="closed"><svg width="21" height="21" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div></div></div></div><div class="vocs_DocsLayout_gutterTopCurtain vocs_DocsLayout_gutterTopCurtain_withSidebar"><div class="vocs_DesktopTopNav_curtain"></div><div class="vocs_MobileTopNav_curtain"><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rqj:" data-state="closed" class="vocs_MobileTopNav_menuTrigger"><div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:13px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 79 48" fill="none"><title>Menu</title><path fill="currentColor" d="M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"></path></svg></div><div class="vocs_MobileTopNav_menuTitle">Privy Integration</div></button></div></div><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R5aj:" data-state="closed" class="vocs_MobileTopNav_outlineTrigger">On this page<div aria-label="On this page" class="vocs_Icon" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button></div></div></div></div><div class="vocs_DocsLayout_gutterRight vocs_DocsLayout_gutterRight_withSidebar"></div><div id="vocs-content" class="vocs_DocsLayout_content vocs_DocsLayout_content_withSidebar vocs_DocsLayout_content_withTopNav"><article class="vocs_Content"><header class="vocs_Header"><h1 class="vocs_H1 vocs_Heading"><div id="privy-integration" class="vocs_Heading_slugTarget"></div>Privy Integration<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#privy-integration" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h1></header>
<h2 class="vocs_H2 vocs_Heading"><div id="prerequisite" class="vocs_Heading_slugTarget"></div>Prerequisite<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#prerequisite" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Your existing web app is powered by <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://privy.io" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Privy</a> for authentication and embedded wallet management.</li>
</ul>
<h2 class="vocs_H2 vocs_Heading"><div id="integration-steps" class="vocs_Heading_slugTarget"></div>Integration Steps<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#integration-steps" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<h3 class="vocs_H3 vocs_Heading"><div id="1-add-required-files" class="vocs_Heading_slugTarget"></div>1. Add Required Files<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#1-add-required-files" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Add these files to your project:</p>
<h4 class="vocs_H4 vocs_Heading"><div id="intersend-connectorjs" class="vocs_Heading_slugTarget"></div>intersend-connector.js<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#intersend-connectorjs" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">/**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * IntersendProvider class implements a Web3 provider interface for iframe-embedded apps</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * Handles wallet connection transactions and messaging between parent and child frames</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">class</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> IntersendProvider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  constructor</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Initialize provider state</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      accounts: [],</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      isConnected: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      chainId: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;0x89&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Default to Polygon</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      lastRequestId: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    };</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Provider identification flags</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.isMetaMask </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.isIntersend </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.isSafe </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.isPortability </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Allowed domains for security</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.allowedDomains </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> [</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;app.intersend.io&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;intersend.io&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;localhost&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">];</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Event handlers registry</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._eventHandlers </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      accountsChanged: </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Set</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      chainChanged: </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Set</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      connect: </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Set</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      disconnect: </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Set</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    };</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Initialize only if running in iframe</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_isIframe</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_initialize</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Check if current context is within an iframe</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  _isIframe</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> typeof</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> window </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!==</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;undefined&#x27;</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> &amp;&amp;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> window </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!==</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> window.parent;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Validate message origin</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  _isValidOrigin</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">origin</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    try</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> url</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> URL</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(origin);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.allowedDomains.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">some</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">domain</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> url.hostname </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">===</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> domain);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">catch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Generate unique request ID</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  _generateRequestId</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.lastRequestId</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">++</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> `intersend_${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">Date</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">now</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">()</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}_${</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">_state</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">lastRequestId</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Initialize provider and set up message listeners</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  _initialize</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Request initial wallet info</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_requestWalletInfo</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Setup message handler</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    window.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">addEventListener</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;message&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._handleMessage.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">bind</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Handle incoming messages from parent frame</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  _handleMessage</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">event</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Validate message origin</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_isValidOrigin</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(event.origin)) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">warn</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Message received from unauthorized origin:&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, event.origin);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">type</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">payload</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">id</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> event.data </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">||</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {};</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    switch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (type) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;WALLET_INFO&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">        this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_handleWalletInfo</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(payload);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        break</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;CHAIN_CHANGED&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">        this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_handleChainChanged</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(payload);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        break</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;ACCOUNTS_CHANGED&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">        this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_handleAccountsChanged</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(payload);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        break</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;DISCONNECT&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">        this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_handleDisconnect</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        break</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">      // Add other message type handlers as needed</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Handle wallet info updates</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  _handleWalletInfo</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">payload</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">payload?.address) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> prevChainId</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.chainId;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> prevAccounts</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.accounts;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.accounts </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> [payload.address];</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.isConnected </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.chainId </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> payload.chainId </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">||</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.chainId;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Emit relevant events</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (prevChainId </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!==</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.chainId) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_emit</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;chainChanged&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.chainId);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (prevAccounts[</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">] </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!==</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> payload.address) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_emit</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;accountsChanged&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.accounts);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">prevAccounts.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">length</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_emit</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;connect&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, { chainId: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.chainId });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Request wallet information from parent frame</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  _requestWalletInfo</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    window.parent.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">postMessage</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      type: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;REQUEST_WALLET_INFO&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      id: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_generateRequestId</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;*&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Handle provider requests</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">   async</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> request</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({ </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">method</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">params</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> }) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_isIframe</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      throw</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;IntersendProvider is only available within iframes&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">debug</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Provider request:&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, method, params);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    switch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (method) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;eth_requestAccounts&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_handleAccountsRequest</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;eth_accounts&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">resolve</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.accounts);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;eth_chainId&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">resolve</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.chainId);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;wallet_switchEthereumChain&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_handleChainSwitch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(params);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;personal_sign&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;eth_sign&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;eth_signTypedData&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      case</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;eth_signTypedData_v4&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_handleSigningRequest</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(method, params);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      default</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">:</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_handleRpcRequest</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(method, params);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Handle account connection request</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  async</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> _handleAccountsRequest</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.accounts.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">length</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> &gt;</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.accounts;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">((</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">resolve</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> requestId</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_generateRequestId</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> timeout</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> setTimeout</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">        this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_removeMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId);</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Account request timeout&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">30000</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_setupMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId, (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        clearTimeout</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(timeout);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (response.error) {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">          reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(response.error));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">else</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (response.payload?.address) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">          this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_handleWalletInfo</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(response.payload);</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">          resolve</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.accounts);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      });</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      window.parent.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">postMessage</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        type: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;REQUEST_WALLET_INFO&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        id: requestId</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;*&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Handle chain switching request</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  async</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> _handleChainSwitch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">params</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">((</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">resolve</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> requestId</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_generateRequestId</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> timeout</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> setTimeout</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">        this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_removeMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId);</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Chain switch timeout&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">30000</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_setupMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId, (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        clearTimeout</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(timeout);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (response.error) {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">          reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(response.error));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">else</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">          resolve</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">null</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      });</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      window.parent.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">postMessage</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        type: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;SWITCH_CHAIN&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        payload: { chainId: params[</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">].chainId },</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        id: requestId</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;*&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Handle signing requests</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  async</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> _handleSigningRequest</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">method</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">params</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">((</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">resolve</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> requestId</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_generateRequestId</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> timeout</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> setTimeout</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">        this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_removeMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId);</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Signing request timeout&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">300000</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">); </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// 5 minutes timeout for signing</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_setupMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId, (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        clearTimeout</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(timeout);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (response.error) {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">          reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(response.error));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">else</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">          resolve</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(response.payload.signature);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      });</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      window.parent.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">postMessage</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        type: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;SIGNATURE_REQUEST&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        payload: {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">          method,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">          params,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">          address: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.accounts[</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">]</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        },</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        id: requestId</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;*&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Handle general RPC requests</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  async</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> _handleRpcRequest</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">method</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">params</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">((</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">resolve</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> requestId</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_generateRequestId</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> timeout</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> setTimeout</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">        this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_removeMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId);</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;RPC request timeout&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">30000</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_setupMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId, (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        clearTimeout</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(timeout);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (response.error) {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">          reject</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(response.error));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">else</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">          resolve</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(response.payload);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      });</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      window.parent.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">postMessage</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        type: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;RPC_REQUEST&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        payload: {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">          method,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">          params,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">          address: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._state.accounts[</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">]</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        },</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        id: requestId</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;*&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Set up message handler for a specific request</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  _setupMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">requestId</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">callback</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> handler</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">event</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_isValidOrigin</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(event.origin)) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">id</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">type</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">payload</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> event.data </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">||</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {};</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (id </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">===</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> requestId) {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        callback</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({ type, payload, error });</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">        this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">_removeMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    };</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    window.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">addEventListener</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;message&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, handler);</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._messageHandlers </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._messageHandlers </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">||</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Map</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">    this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._messageHandlers.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">set</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId, handler);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Remove message handler</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  _removeMessageHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">requestId</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._messageHandlers?.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">has</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId)) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      window.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">removeEventListener</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;message&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._messageHandlers.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">get</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId));</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._messageHandlers.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">delete</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(requestId);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  /**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   * Event subscription methods</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">   */</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  on</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">event</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">handler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._eventHandlers[event]) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._eventHandlers[event].</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">add</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(handler);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  removeListener</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">event</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">handler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._eventHandlers[event]) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._eventHandlers[event].</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">delete</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(handler);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  _emit</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">event</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">data</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._eventHandlers[event]) {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">      this</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">._eventHandlers[event].</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">forEach</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">handler</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> handler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(data));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">/**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * EIP-6963 provider info</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> PROVIDER_INFO</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  uuid: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;intersend-provider-v1&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  name: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Intersend&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  icon: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;data:image/svg+xml;base64...&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Add your base64 encoded icon</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  rdns: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;com.intersend&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">};</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">/**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * Announce provider according to EIP-6963</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> announceProvider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  // Only announce if in iframe</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">typeof</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> window </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">===</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;undefined&#x27;</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> ||</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> window </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">===</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> window.parent) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> announcement</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    provider,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    info: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">PROVIDER_INFO</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  };</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  // Announce immediately</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  window.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">dispatchEvent</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> CustomEvent</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;eip6963:announceProvider&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      detail: announcement</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    })</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  );</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  // Listen for future requests</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  window.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">addEventListener</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;eip6963:requestProvider&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, () </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    window.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">dispatchEvent</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> CustomEvent</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;eip6963:announceProvider&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        detail: announcement</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      })</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Create provider instance</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> provider</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> IntersendProvider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Inject provider and announce</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">typeof</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> window </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!==</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;undefined&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  // Only inject if in iframe</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (window </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!==</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> window.parent) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    Object.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">defineProperty</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(window, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;ethereum&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      value: provider,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      writable: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      configurable: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      enumerable: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">true</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    });</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">    announceProvider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { provider, announceProvider };</span></span></code></pre></div></div>
<h4 class="vocs_H4 vocs_Heading"><div id="useintersendautoconnectjs" class="vocs_Heading_slugTarget"></div>useIntersendAutoConnect.js<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#useintersendautoconnectjs" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// useIntersendAutoConnect.js</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { useEffect, useState, useCallback } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;react&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { useWallets, usePrivy } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@privy-io/react-auth&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">/**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * Hook for handling Intersend wallet auto-connection</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useIntersendAutoConnect</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">wallets</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">ready</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useWallets</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> [</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">isConnecting</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">setIsConnecting</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">] </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useState</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> [</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">setError</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">] </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useState</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">null</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> connectWallet</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useCallback</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">address</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> wallet</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> wallets.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">find</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">w</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> w.address?.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">toLowerCase</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">===</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> address.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">toLowerCase</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    );</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (wallet) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      try</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> wallet.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">loginOrLink</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">catch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (err) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Wallet login/link error:&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, err);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        throw</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> err;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }, [wallets]);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  useEffect</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">ready </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">||</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> isConnecting </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">||</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> !</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">window.ethereum?._state?.accounts?.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">length</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> autoConnect</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> () </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">      try</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        setIsConnecting</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        setError</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">null</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> address</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> window.ethereum._state.accounts[</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">];</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> connected</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> connectWallet</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(address);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">        if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">connected) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">          console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">log</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;No matching wallet found for address:&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, address);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">catch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (err) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Auto-connect error:&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, err);</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        setError</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(err);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">finally</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">        setIsConnecting</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    };</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">    autoConnect</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }, [ready, wallets, isConnecting, connectWallet]);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { isConnecting, error };</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">/**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * Component that handles auto-connection of Intersend wallet</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * Usage: Just include this component in your app&#x27;s provider wrapper</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * &lt;AutoConnectHandler /&gt;</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> AutoConnectHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">isConnecting</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useIntersendAutoConnect</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  useEffect</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (error) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Auto-connect error:&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, error);</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">      // You can add additional error handling here like showing a toast notification</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">      // toast.error(&#x27;Failed to auto-connect wallet&#x27;);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }, [error]);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  // Component doesn&#x27;t render anything</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> null</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Export both the hook and the component</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { useIntersendAutoConnect };</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Default export is the component for easier imports</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> default</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> AutoConnectHandler;</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="2-configure-providers" class="vocs_Heading_slugTarget"></div>2. Configure Providers<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#2-configure-providers" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Import and set up the connector and auto-connect handler in your app&#x27;s provider configuration:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;./intersend-connector&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { AutoConnectHandler } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;./hooks/useIntersendAutoConnect&#x27;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> default</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Providers</span><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span">({ </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">children</span><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span"> }) </span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">{</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    &lt;</span><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">PrivyProvider</span><span style="color:#6F42C1;--shiki-dark:#6CB6FF" class="vocs_Span"> appId</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">{</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">privyAppId</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">}</span><span style="color:#6F42C1;--shiki-dark:#6CB6FF" class="vocs_Span"> config</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">{</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">...</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">}</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      &lt;</span><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">WagmiProvider</span><span style="color:#6F42C1;--shiki-dark:#6CB6FF" class="vocs_Span"> config</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">{</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">wagmiConfig</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">}</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">        {</span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">/* AutoConnectHandler manages wallet connection when app is loaded in Intersend */</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        &lt;</span><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">AutoConnectHandler</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> /&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">        {</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">children</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      &lt;/</span><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">WagmiProvider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    &lt;/</span><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">PrivyProvider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="3-whitelist-intersend-domain" class="vocs_Heading_slugTarget"></div>3. Whitelist Intersend Domain<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#3-whitelist-intersend-domain" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Add Intersend domains to your Privy dashboard&#x27;s allowed origins:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://app.intersend.io" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://app.intersend.io</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://intersend.io" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">https://intersend.io</a></li>
</ul>
<p class="vocs_Paragraph"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://docs.privy.io/guide/react/configuration/allowed-domains" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Configure Allowed Origins →</a></p>
<h3 class="vocs_H3 vocs_Heading"><div id="4-verify-app-behavior-inside-intersend" class="vocs_Heading_slugTarget"></div>4. Verify App Behavior Inside Intersend<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#4-verify-app-behavior-inside-intersend" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem"><strong class="vocs_Strong">Open <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://app.intersend.io/apps/sandbox" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Sandbox</a></strong> and paste your web app&#x27;s URL into the address bar of the Intersend browser.</li>
<li class="vocs_ListItem"><strong class="vocs_Strong">Auto-connect</strong> should kick in; Intersend will inject the user&#x27;s wallet data into your app.</li>
<li class="vocs_ListItem"><strong class="vocs_Strong">Test transaction or signing flows</strong> to confirm everything relays properly.</li>
</ol>
<h3 class="vocs_H3 vocs_Heading"><div id="5-get-listed" class="vocs_Heading_slugTarget"></div>5. Get Listed<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#5-get-listed" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Once integrated submit your app for review:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Email: <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="mailto:hello@intersend.io">hello@intersend.io</a></li>
<li class="vocs_ListItem">Telegram: @erturkarda</li>
</ul>
<h2 class="vocs_H2 vocs_Heading"><div id="need-help" class="vocs_Heading_slugTarget"></div>Need Help?<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/apps/privy#need-help" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent" href="mailto:hello@intersend.io">Contact Intersend Support</a></li>
</ul></article><footer class="vocs_Footer" data-layout="docs"><div class="vocs_Footer_container"></div></footer></div><div data-bottom-observer="true"></div></div></div>
  </body>
</html>
